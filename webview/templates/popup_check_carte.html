{% load i18n %}
{% load webviewTags %}
{% load humanize %}
{% get_current_language as LANGUAGE_CODE %}

<div id="popup-cashless" style="background-color:{{ background }};" class="BF-col-uniforme popup-cashless-conteneur">

    {% if msg_content != None %}
        {% if msg_title != None %}
            <div class="BF-col check-carte-inconnue l100p test-return-msg-title"
                 style="white-space: pre-line; text-align: center;">{{ msg_title }}</div>
        {% endif %}
        <div class="BF-col check-carte-inconnue l100p test-return-msg-content"
             style="white-space: pre-line; text-align: center;">{{ msg_content }}</div>
    {% else %}
        <div class="BF-col-uniforme check-carte-ok">
            <div class="check-carte-ok-total-carte test-return-total-card">
                <span>{% trans "Total sur carte" %} : {{ total_monnaie }}</span>
            </div>
            {% if serializer_from_fedow.is_wallet_ephemere %}
                <div class="check-carte-ok-total-carte test-return-total-card">
                    <span>{% trans "Carte anonyme" %}</span>
                </div>
            {% else %}
                <div class="check-carte-ok-total-carte test-return-total-card">
                    <span>{% trans "Carte liée à un email." %}</span>
                </div>
            {% endif %}

            {% if not tokens_membership %}
                <div class="check-carte-ok-total-carte test-return-total-card">
                    <span>{% trans "Aucune adhésion" %}</span>
                </div>

            {% endif %}

        </div>
    {% endif %}

    <div class="containe" style="font-size: 1.2em">
        {% if tokens_cashless %}
            <div>
                <span>{% trans "Cashless" %} :</span>
                <table>
                    <tr>
                        <th></th>
                        <th>{% trans "Qtt" %}</th>
                        <th>{% trans "Origine" %}</th>
                    </tr>
                    {% for token in tokens_cashless %}
                        <tr>
                            <td style="padding: 0 1em 0 1em;">{{ token.name }}</td>
                            <td style="padding: 0 1em 0 1em;">{{ token.value | dec2 }}</td>
                            <td style="padding: 0 1em 0 1em;">{{ token.asset.place_origin.name }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        {% endif %}

        {% if tokens_membership %}
            <div style="margin-top: 1em;">
                <span>{% trans "Adhésions" %} :</span>
                <table>
                    <tr>
                        <th></th>
                        <th>{% trans "Début" %}</th>
                        <th>{% trans "Origine" %}</th>
                    </tr>
                    {% for token in tokens_membership %}
                        <tr>
                            <td style="padding: 0 1em 0 1em;">{{ token.name }}</td>
                            <td style="padding: 0 1em 0 1em;">{{ token.start_membership_date | naturalday }}</td>
                            <td style="padding: 0 1em 0 1em;">{{ token.asset.place_origin.name }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        {% endif %}
    </div>

    <div class="popup-conteneur-bt-retour BF-col" style="margin: 10px 0;">
        {% include "elements/bouton_return.html" %}
    </div>

</div>
