{% load i18n %}
<style>
.com-body {
  display: flex;
  flex-direction: column;
  width: 98%;
  font-size: 1rem;
  margin-top: 16px;
  padding: 0;
  border-radius: 8px;
  background-color: #4f504f;
  box-sizing: border-box;
  font-family: "Luciole-regular";
  --bg-com-title: #45494c;
}

.com-body button {
  border: none;
  color: #FFFFFF;
}

/* header */
.nav-com-htmx {
  display: flex;
  flex-direction: row;
  width: calc(100% - 120px);
  height: 100%;
}

.nav-com-htmx-titre {
  width: 15%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-size: 2vw;
}

.nav-com-htmx-menu {
  width: 85%;
  display: flex;
  flex-direction: row;
  justify-content: end;
  align-items: center;
  padding-right: 8px;
}

.com-part-articles {
  width: 80%;
  padding: 4px;
}

.com-part-validate {
  width: 20%;
  padding: 4px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: end;
}

.com-part-articles-qty {
  width: 10%;
}
.com-part-articles-name {
  width: 90%;
}
/* supérieur à 600px */
@media screen and (min-width: 600px) {
  .com-grid {
    font-size: 2rem;
    background-color: aqua;
  }
}
</style>


<div class="BF-col">
 
  <header class="fond-header l100vw">
    <nav class="navbar-horizontal">
      <div class="navbar-img BF-col curseur-action" onclick="document.querySelector('#menu-burger-conteneur').classList.remove('burger-show');vue_pv.reloadData();">
        <img alt="TiBillet" src="../static/webview/images/icon-complet-blanc.svg"/>
      </div>
      <div class="nav-com-htmx">
        <span class="nav-com-htmx-titre">{% trans 'Commandes' %}</span>
        <span class="nav-com-htmx-menu">
          <i class="fa fa-home fs2rem cp" aria-hidden="true" onclick="allOrderReturnOriginalInterface()"></i>
        </span>
      </div>
    </nav>
  </header>

  {% for cmd in commands_today %}
  <form id="com-target{{ cmd.pk}}" class="com-body">
    {% include "sales/list-header_order.html" %}
    <div class="BF-ligne-deb">
      <div class="com-part-articles BF-col-deb">
        {% for article in cmd.articles.all %}
          <!-- visuel -->
          <div class="BF-ligne-deb">
            <div class="com-part-articles-qty">{{ article.qty|floatformat:0 }}</div>
            <div class="com-part-articles-name">{{ article.article.name }}</div>
          </div>
          <!-- inpubuttont -->
           <input type="hidden" name="article-{{ article.id }}" value="{{ article.qty }}"/>
        {% endfor %}
      </div>
      <div type="submit" class="com-part-validate">
        <button hx-post="/htmx/sales/" 
          hx-vals='js:{"tag_id_cm":glob.tagIdCm,"uuid_commande":"{{ cmd.pk }}","pk_responsable":"{{ cmd.responsable_id }}" }' 
          hx-target="#com-target{{ cmd.pk}}" hx-swap="innerHTML" 
          class="BF-col com-bt-valider-normal fond-ok test-action-validate-prepa" title="Validate preparation">
          <i class="fas fa-check"></i>
        </button>
      </>
    </div>
  </form>
  {% endfor %}
</div>
